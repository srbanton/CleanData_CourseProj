###Codebook 

##"Human Activity Recognition Using Smartphones" Dataset Analysis

###Background on the Human Activity Recognition Dataset 
The original data was collected by researchers in Spain and Italy.  30 subjects wearing a Samsung Galaxy S II smartphone performed 6 routine activities:

* Walking
* Walking upstairs
* Walking downstairs
* Sitting
* Standing
* Laying

Sensors on the smartphone's gyroscope and accelerometer tracked each subject's motion with two triaxial signals, tGyro-XYZ and tAcc-XYZ. 

###Variables in the Untidy Dataset 

Features (see features.txt) were generated using signal processing methods to decompose tGyro-XYZ and tAcc-XYZ into 17 frequency domain or time domain variables.  The Fast Fourier Transform was used to transform signals into the frequency domain.  17 summary statistics (e.g., mean, standard deviation, max, or min) were computed for each of these variables.  

The 17 frequency and time-domain features generated from the decomposition of tGyro-XYZ and tAcc-XYZ were:

|                  |     Variable      |                  |
|:----------------:|:-----------------:|:----------------:|
|				   |                   |                  |
| tBodyAcc-XYZ     | tGravityAcc-XYZ   | tBodyAccJerk-XYZ |
| tBodyGyro-XYZ    | tBodyGyroJerk-XYZ | tBodyAccMag      |
| tGravityAccMag   | tBodyAccJerkMag   | tBodyGyroMag     |
| tBodyGyroJerkMag | fBodyAcc-XYZ      | fBodyAccJerk-XYZ |
| fBodyGyro-XYZ    | fBodyAccMag       | fBodyAccJerkMag  |
| fBodyGyroMag     | fBodyGyroJerkMag  |		-		  |

*"t" and "f" prefixes represent time domain and frequency domain, respectively*.

Five additional variables were generated by calculating the average of tBodyACC-XYZ, tBodyACCJerk, tBodyGyro-XYZ, tBodyGyroJerk, and tGravityACC-XYZ as scalars.  These were:

* gravityMean
* tBodyAccMean
* tBodyAccJerkMean
* tBodyGyroMean
* tBodyGyroJerkMean

**These variables are normalized and bound within the interval [-1,1].  They do not have units.**  For more detailed info on the signal processing visit the dataset's repository [here](http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones).     

Note: there were multiple recordings of tGyro-XYZ and tACC-XYZ when a subject performed one of the activities.  So for one subject and activity pair (e.g. Subject 1 & Walking) there were multiple tGyro-XYZ and tACC-XYZ readings and therefore multiple readings for the 22 variables mentioned.

##Creating a Tidy Dataset

###Deciding how to extract data

The summary statistics I was interested in were the mean and standard deviation of the features.  In other words, variables that had "mean" or "std" in their name.  

Variables that had "Mean" in their name, like gravityMean, were not included because they were not *true* measurements of the mean for those variables (they're scalars) and were supplied to another function in the signal processing step.  

Variables that had "meanFreq" in their names were included because unlike mean() the meanFreq() calculation was a weighted average and just another representation of the data's behavior.  The researchers computing the weighted average suggests that body motion may have been more dominant in one or two directions (x,y, or z), which would make sense in activities like laying or standing.

After extracting just those feature variables I wanted to calculate the mean of each of them per subject *and* the subject's activity.  Each of the 30 subjects performed 6 activities so I expected 180 observations in my final data file.  Doing so required retrieval and cleaning of the data which is encoded in run_analysis.R.

###run_analysis.R workflow

#####Data Retrieval

The data from each of the files below were read into R using individual read.table() calls.

* features.txt
* x_train.txt
* y_train.txt
* x_test.txt
* y_test.txt 
* subject_train.txt
* subject_test.txt
 
The activity_labels.txt file contains the activity names that correspond to the numeric codes input into the "y-" files as shown in the table below.  

| Numeric Code     | Activity             |
|:----------------:|:--------------------:|
| 1                | Walking              |
| 2                | Walking Upstairs     |
| 3                | Walking Downstairs   |
| 4                | Sitting              |
| 5                | Standing             |
| 6                | Laying               |

The information from this file was used to manually change the numeric codes to the activity names.

#####Cleaning Data
1. Create test and train datasets using cbind()
	1. test = subject_test, y_test, and x_test datasets
	2. train = subject_train, y_train, and x_train datasets
2. Create one large dataset combining test and train using rbind()
3. Assign column names to large data set, including the feature names from features.txt 
4. Extract features that have "mean" or "std" in their names using subsetting and grep()

#####Generating Tidy Dataset 
1. Rename activity labels using factor() to substitute numeric code with activity name
2. Group large dataset by subject and activity using group_by() (dplyr package) 
3. Use summarise_each() to calculate the mean of each feature for each subject-activity group
4. Check dimensions of resulting data table
5. Write tidy data set to .txt file

##Descriptions of the Variables in My Tidy Dataset

###Descriptive Variables

There were 2 descriptive variables: Subject_ID and Activity.  They are the first two columns of tidydata.txt, respectively.

1. **Subject_ID**: Integer ranging from 1:30 representing each of the 30 subjects.
2. **Activity**: One of six activities each subject performed; class is factor.

###Feature Variables

There were 79 variables extracted that were the mean or standard deviation of the measured features.  Again, the two signals pre-processing were tAcc-XYZ and tGyro-XYZ from which these features were derived.  

**All features were normalized and bounded within [-1,1].  They do not have any units.**  

Body refers to each subject's motion as tracked by the Samsung Galaxy's accelerometer and gyroscope. The 79 features (in the order of their appearance in tidydata.txt) are:

##
####Time Domain Feature Variables

Body's Acceleration (Linear + Angular)

1. **tBodyAcc-mean()-X**: mean of body's acceleration in x direction
2. **tBodyAcc-mean()-Y**: mean of body's acceleration in y direction
3. **tBodyAcc-mean()-Z**: mean of body's acceleration in z direction
4. **tBodyAcc-std()-X**: standard deviation of body's acceleration in x direction
5. **tBodyAcc-std()-Y**: standard deviation of body's acceleration in y direction
6. **tBodyAcc-std()-Z**: standard deviation of body's acceleration in z direction   

Gravity

7. **tGravityAcc-mean()-X**: mean of gravity in x direction
8. **tGravityAcc-mean()-Y**: mean of gravity in y direction
9. **tGravityAcc-mean()-Z**: mean of gravity in z direction
10. **tGravityAcc-std()-X**: standard deviation of gravity in x direction
11. **tGravityAcc-std()-Y**: standard deviation of gravity in y direction
12. **tGravityAcc-std()-Z**: standard deviation of gravity in z direction

Body's Linear Acceleration

13. **tBodyAccJerk-mean()-X**: mean of body's linear acceleration in x direction
14. **tBodyAccJerk-mean()-Y**: mean of body's linear acceleration in y direction
15. **tBodyAccJerk-mean()-Z**: mean of body's linear acceleration in z direction
16. **tBodyAccJerk-std()-X**: standard deviation of body's linear acceleration in x direction
17. **tBodyAccJerk-std()-Y**: standard deviation of body's linear acceleration in y direction
18. **tBodyAccJerk-std()-Z**: standard deviation of body's linear acceleration in z direction

Body's Angular Acceleration

19. **tBodyGyro-mean()-X**: mean of body's angular acceleration in x direction
20. **tBodyGyro-mean()-Y**:mean of body's angular acceleration in y direction
21. **tBodyGyro-mean()-Z**: mean of body's angular acceleration in z direction
22. **tBodyGyro-std()-X**: standard deviation of body's angular acceleration in x direction
23. **tBodyGyro-std()-Y**: standard deviation of body's angular acceleration in y direction
24. **tBodyGyro-std()-Z**: standard deviation of body's angular acceleration in z direction

Body's Angular Velocity

25. **tBodyGyroJerk-mean()-X**: mean deviation of body's angular velocity in x direction
26. **tBodyGyroJerk-mean()-Y**: mean deviation of body's angular velocity in y direction
27. **tBodyGyroJerk-mean()-Z**: mean deviation of body's angular velocity in z direction
28. **tBodyGyroJerk-std()-X**: standard deviation of body's angular velocity in x direction
29. **tBodyGyroJerk-std()-Y**: standard deviation of body's angular velocity in y direction
30. **tBodyGyroJerk-std()-Z**: standard deviation of body's angular velocity in z direction

Magnitude of Acceleration 

31. **tBodyAccMag-mean()**: mean magnitude of body's acceleration
32. **tBodyAccMag-std()**: standard deviation of the magnitude of the body's acceleration

Magnitude of Gravity

33. **tGravityAccMag-mean()**: mean magnitude of gravity
34. **tGravityAccMag-std()**: standard deviation of the magnitude of gravityy

Magnitude of Linear Acceleration

35. **tBodyAccJerkMag-mean()**: mean magnitude of body's linear acceleration
36. **tBodyAccJerkMag-std()**: standard deviation of the magnitude of the body's linear acceleration

Magnitude of Angular Acceleration

37. **tBodyGyroMag-mean()**: mean magnitude of the body's angular acceleration
38. **tBodyGyroMag-std()**: standard deviation of the magnitude of the body's angular acceleration

Magnitude of Angular Velocity

39. **tBodyGyroJerkMag-mean()**: mean magnitude of the body's angular velocity
40. **tBodyGyroJerkMag-std()**: standard deviation of the magnitude of the body's angular velocity   
##
####Frequency Domain Feature Variables


Fast Fourier Transform  (FFT) of Body's Acceleration - mean()

41. **fBodyAcc-mean()-X**: mean frequency of body's acceleration in x direction
42. **fBodyAcc-mean()-Y**: mean frequency of body's acceleration in y direction
43. **fBodyAcc-mean()-Z**: mean frequency of body's acceleration in z direction
44.  **fBodyAcc-std()-X**: standard deviation of the frequencies of the body's acceleration in x direction
45.  **fBodyAcc-std()-Y**: standard deviation of the frequencies of the body's acceleration in y direction
46.  **fBodyAcc-std()-Z**: standard deviation of the frequencies of the body's acceleration in z direction

FFT of Body's Acceleration - meanFreq()

47. **fBodyAcc-meanFreq()-X**: weighted average of frequencies in x direction of body's acceleration
48. **fBodyAcc-meanFreq()-Y**: weighted average of frequencies in y direction of body's acceleration
49. **fBodyAcc-meanFreq()-Z**: weighted average of frequencies in z direction of body's acceleration

FTT of Linear Acceleration - mean()

50. **fBodyAccJerk-mean()-X**: mean frequency of body's linear acceleration in x direction
51. **fBodyAccJerk-mean()-Y**: mean frequency of body's linear acceleration in y direction
52. **fBodyAccJerk-mean()-Z**: mean frequency of body's linear acceleration in z direction
53. **fBodyAccJerk-std()-X**: standard deviation of the frequencies of the body's linear acceleration in x direction
54. **fBodyAccJerk-std()-Y**: standard deviation of the frequencies of the body's linear acceleration in y direction
55. **fBodyAccJerk-std()-Z**: standard deviation of the frequencies of the body's linear acceleration in z direction

FTT of Linear Acceleration - meanFreq()

56. **fBodyAccJerk-meanFreq()-X**: weighted average of frequencies in x direction of body's linear acceleration
57. **fBodyAccJerk-meanFreq()-Y**: weighted average of frequencies in y direction of body's linear acceleration
58. **fBodyAccJerk-meanFreq()-Z**: weighted average of frequencies in z direction of body's linear acceleration

FTT of Angular Acceleration - mean()

59. **fBodyGyro-mean()-X**: mean frequency of body's angular acceleration in x direction 
60. **fBodyGyro-mean()-Y**: mean frequency of body's angular acceleration in y direction 
61. **fBodyGyro-mean()-Z**: mean frequency of body's angular acceleration in z direction 
62. **fBodyGyro-std()-X**: standard deviation of the frequencies of the body's angular acceleration in x direction 
63. **fBodyGyro-std()-Y**: standard deviation of the frequencies of the body's angular acceleration in y direction
64. **fBodyGyro-std()-Z**: standard deviation of the frequencies of the body's angular acceleration in z direction

FTT of Angular Acceleration - meanFreq()

65. **fBodyGyro-meanFreq()-X**: weighted average of frequencies in x direction of body's angular acceleration
66. **fBodyGyro-meanFreq()-Y**: weighted average of frequencies in y direction of body's linear acceleration
67. **fBodyGyro-meanFreq()-Z**: weighted average of frequencies in z direction of body's linear acceleration

FTT of Magnitude of Body's Acceleration

68. **fBodyAccMag-mean()**: mean frequency the magnitude of acceleration
69. **fBodyAccMag-std()**: standard deviation of the frequencies of the magnitudes of acceleration
70. **fBodyAccMag-meanFreq()**" weighted average of the frequencies of the magnitude of acceleration

FTT of Magnitude of Linear Acceleration

71. **fBodyBodyAccJerkMag-mean()**: mean frequency of the magnitude of body's linear acceleration
72. **fBodyBodyAccJerkMag-std()**: standard deviation of the frequencies of the magnitude of body's linear acceleration
73. **fBodyBodyAccJerkMag-meanFreq()**: weighted average of the frequencies of the magnitude of linear acceleration

FTT of Magnitude of Angular Acceleration

74. **fBodyBodyGyroMag-mean()**: mean frequency of the magnitude of body's angular acceleration
75. **fBodyBodyGyroMag-std()**: standard deviation of the frequencies of the magnitude of body's angular acceleration
76. **fBodyBodyGyroMag-meanFreq()**: weighted average of the frequencies of the magnitude of angular acceleration

FTT of Magnitude of Angular Velocity

77. **fBodyBodyGyroJerkMag-mean()**: mean frequency of the magnitude of body's angular velocity
78. **fBodyBodyGyroJerkMag-std()**: standard deviation of the frequencies of the magnitude of body's angular velocity
79. **fBodyBodyGyroJerkMag-meanFreq()**: weighted average of the frequencies of the magnitude of angular velocity

